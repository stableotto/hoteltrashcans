<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Content Manager</title>
</head>
<body>
  <!-- Include the script that builds the page and powers Decap CMS -->
  <script src="https://unpkg.com/decap-cms@^3.0.0/dist/decap-cms.js"></script>
  
  <script>
    // Debug initialization
    console.log('Decap CMS loading...');
    console.log('Current URL:', window.location.href);
    console.log('Current domain:', window.location.hostname);
    
    // Handle all errors
    window.addEventListener('error', function(e) {
      console.error('CMS Error:', e.error);
      console.error('Error details:', e);
    });
    
    // Handle unhandled promise rejections
    window.addEventListener('unhandledrejection', function(e) {
      console.error('Unhandled promise rejection:', e.reason);
    });
    
    // Wait for CMS to load and log its status
    function checkCMSStatus() {
      if (window.CMS) {
        console.log('✅ CMS object available:', window.CMS);
        console.log('✅ CMS init should be happening...');
        
        // Try to get the config
        try {
          fetch('/admin/config.yml')
            .then(response => response.text())
            .then(config => {
              console.log('✅ Config loaded:', config);
            })
            .catch(error => {
              console.error('❌ Config load error:', error);
            });
        } catch (error) {
          console.error('❌ Config fetch error:', error);
        }
      } else {
        console.log('⏳ CMS object not yet available, waiting...');
        setTimeout(checkCMSStatus, 100);
      }
    }
    
    // Start checking after a short delay
    setTimeout(checkCMSStatus, 100);
    
    // Log when DOM is ready
    document.addEventListener('DOMContentLoaded', function() {
      console.log('✅ DOM ready');
    });
  </script>
</body>
</html> 